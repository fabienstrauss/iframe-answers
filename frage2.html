<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Antwort speichern</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
    <style>
        body { font-family: sans-serif; padding: 1rem; }
        textarea { width: 100%; height: 120px; }
        button { margin-top: 0.5rem; padding: 0.5rem 1rem; }
        #status { margin-top: 0.5rem; color: green; }
    </style>
</head>
<body>

<h3>Frage 2 - Test</h3>
<textarea id="answer" placeholder="Deine Antwort..."></textarea><br>
<button onclick="saveAnswer()">Antwort speichern</button>
<p id="status"></p>

<script>
    const SUPABASE_URL = 'https://aewxbihpdaaypsvcxhnw.supabase.co';
    const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFld3hiaWhwZGFheXBzdmN4aG53Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTEzNzkyMzYsImV4cCI6MjA2Njk1NTIzNn0.urDsfMWOBCcoooVzOVM9p7-snwBbPsoC_8J0r6eSkvs';

    const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

    async function saveAnswer() {
        const answerText = document.getElementById("answer").value;
        const status = document.getElementById("status");

        const { error } = await supabase
            .from("answers")
            .insert([
                {
                    user_id: "anonym",
                    question_id: "frage-2",
                    answer: answerText
                }
            ]);

        if (error) {
            status.textContent = "Fehler: " + error.message;
            status.style.color = "red";
        } else {
            status.textContent = "Antwort gespeichert!";
            status.style.color = "green";
        }
    }
</script>

</body>
</html>